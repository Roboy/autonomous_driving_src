<launch>
  <arg name="model"
       default="$(find tricycle_gazebo)/urdf_models/tricycle.urdf"/>

  <include file="$(find tricycle_gazebo)/launch/gazebo.launch">
    <arg name="model" value="$(arg model)"/>
  </include>

  <rosparam command="load"
            file="$(find tricycle_gazebo)/config/joints_state.yaml"
            ns="tricycle_joint_state_controller"/>

  <rosparam command="load"
            file="$(find tricycle_gazebo)/config/front_wheel_controller.yaml"
            ns="tricycle_front_wheel_controller"/>

  <rosparam command="load"
            file="$(find tricycle_gazebo)/config/rear_wheels_controller.yaml"
            ns="tricycle_rear_wheels_controller"/>

  <node name="trycicle_controller_spawner" pkg="controller_manager"
        type="spawner"
        args="tricycle_joint_state_controller
          tricycle_front_wheel_controller
          tricycle_rear_wheels_controller
          --shutdown-timeout 3"/>

  <node name="navigation_stack_bridge" pkg="tricycle_gazebo"
        type="controller.py"/>

</launch>